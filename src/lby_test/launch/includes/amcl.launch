<?xml version="1.0"?>

<!-- 
  - map_server
  - amcl
  - move_base
  - cmd_vel to ackermann_cmd
  - rviz view
 -->
<launch>
    <arg name="robot_name" default="$(optenv TIANRACER_NAME tianracer)" doc="robot name [tianracer_No1, tianracer_No2, tianracer_No3, ...]"/>    
    <!-- for amcl -->
    <arg name="init_x" default="0.0" />
    <arg name="init_y" default="0.0" />
    <arg name="init_a" default="0.0" />
    <arg name="base" default="$(optenv TIANRACER_BASE compact)" />

    <!-- Define various frame and topic IDs with default values -->
    <arg name="odom_frame_id" default="odom"/>
    <arg name="base_frame_id" default="base_footprint"/>
    <arg name="global_frame_id" default="map"/>
    <arg name="laser_frame_id" default="laser"/>
    <arg name="odom_topic" default="odom" />
    <arg name="laser_topic" default="scan" />
    <arg name="depth_points_topic" default="camera/depth_registered/points" />
    <arg name="lidar_points_topic" default="lidar_points" /> 

    <group ns="$(arg robot_name)">
        <!-- Localization -->
        <!-- AMCL -->
        <include file="$(find tianracer_navigation)/launch/includes/tianracer_amcl.launch.xml">
            <arg name="init_x" value="$(arg init_x)"/>
            <arg name="init_y" value="$(arg init_y)"/>
            <arg name="init_a" value="$(arg init_a)"/>
            <arg name="odom_frame_id" value="$(arg robot_name)/$(arg odom_frame_id)"/>
            <arg name="base_frame_id" value="$(arg robot_name)/$(arg base_frame_id)"/>
            <arg name="global_frame_id" value="$(arg robot_name)/$(arg global_frame_id)"/>
        </include>
    </group> 
</launch>
